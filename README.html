<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 9.1.1" />
<title>UT ModBuild Build System Template</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>UT ModBuild Build System Template</h1>
<span id="author">Gustavo Ramos Rehermann</span><br />
<span id="email"><code>&lt;<a href="mailto:rehermann6046@gmail.com">rehermann6046@gmail.com</a>&gt;</code></span><br />
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>This is a generic build system for classic Unreal Tournament projects,
particularly mods.</p></div>
<div class="paragraph"><p>May or may not be applicable to other UE1 games, such as Deus Ex, though
it has never been tested.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_pitch">1. Pitch</h2>
<div class="sectionbody">
<div class="paragraph"><p>It is useful for the following reasons:</p></div>
<div class="ulist"><ul>
<li>
<p>
Easily <strong>building</strong> your mod on Linux with a single command!
</p>
</li>
<li>
<p>
<strong>Versioning</strong> your mod (see <a href="#versioning">[versioning]</a>)!
</p>
</li>
<li>
<p>
Having GitHub <em>build</em> your mod <strong>for you</strong>, and even <em>release</em> it <strong>for you</strong>
    if you tag it accordingly, via the <em>Github Actions CI workflow</em>
    (which includes <em>checking possible compiler errors in your commits</em>);
    yay for convenience!
</p>
</li>
</ul></div>
<div class="paragraph"><p>There are, however, drawbacks, which can be more insightful than the
strengths, <sub>and an exercise in humility</sub>. See:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Does not work natively on Windows</strong>: you will need WSL, or Cygwin or Msys2,
    or even a virtual machine or container. This build system is built around
    Linux, in and out. <em>This does not mean you cannot use it from Windows</em>, but
    will require an environment that is compatible with what you see in Linux,
    including Bash.
</p>
</li>
<li>
<p>
This build system requires <strong>installing Go</strong>, precisely because of Mustache.
    Golang is a bit of a heft, and I can understand why this can be a turn-off
    for people.
</p>
</li>
<li>
<p>
To me it feels a bit <strong>hacky</strong>&#8230; though, sure, that is subjective.
</p>
</li>
<li>
<p>
The CI workflow <strong>only works in GitHub</strong>. I&#8217;m not shilling Microsoft, it&#8217;s
    just the one CI I know how to work with. Adding support for Travis CI, and
    maybe even GitLab CI, may be considered for the near future, but I wouldn&#8217;t
    hold my breathe if I were you.
</p>
</li>
<li>
<p>
It&#8217;s <strong>difficult to update</strong> ModBuild once you start using it. This should
    be rectified in the near future. How? Good question.
</p>
</li>
</ul></div>
<div class="paragraph"><p>It was still a hell of a lot of fun to work on, and I sincerely really hope
that, if you consider using this for your mod, it helps you have more fun
working on it too :)</p></div>
<div class="paragraph"><p>For more info on the auto-releases, see the <a href="#auto-releases">[auto-releases]</a> section.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_contents">2. Contents</h2>
<div class="sectionbody">
<div class="paragraph"><p>This template includes:</p></div>
<div class="ulist"><ul>
<li>
<p>
A very tiny example mod, with a single mutator <em>"My Mutator"</em> that spawns
  non-aggressive Pupae whenever players take damage;
</p>
</li>
<li>
<p>
A <code>template.int</code> <a href="https://mustache.github.io">Mustache</a> template for the mod&#8217;s
  <code>.int</code> file demonstrating how to use Mustache, alongside a simple
  <code>template-options.yml</code> to parametrize it, in this case demonstrating adding
  mutators to said <code>.int</code>;
</p>
</li>
<li>
<p>
A <code>Makefile</code> that is capable of automatically setting up a v469b build
  environment pretty much from scratch (if you have an Internet connection);
</p>
</li>
<li>
<p>
A <code>buildconfig.sh</code> for easily changing around values used in both the build
  process and the CI script, letting you adapt the build system to your mod very
  quickly;
</p>
</li>
<li>
<p>
A <strong>CI workflow</strong> that lets GitHub <em>check</em> (for compile errors), <em>build</em>, and even
  <em>release</em> the mod for you, with a <code>latest-changes.md</code> file you can edit to show
  up in the release.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_building">3. Building</h2>
<div class="sectionbody">
<div class="paragraph"><p>See this section for building from source.</p></div>
<div class="paragraph"><p>If you instead intend to use this template on your project, see <a href="#applying">[applying]</a>
below!</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">This requires Linux or a Linux-like environment.</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_prerequisites">3.1. Prerequisites</h3>
<div class="paragraph"><p>If you want to build from source, make sure you have the build dependencies
beforehand. You most likely already have <code>curl</code>, <code>zip</code>, <code>tar</code>, <code>gzip</code>, <code>bash</code>
and <code>bz2</code>, but you will also need to install a Go package named <code>mustache</code>.</p></div>
<div class="paragraph"><p>You can grab it by <a href="https://golang.org/doc/install">installing Go</a>,
and then running:</p></div>
<div class="listingblock">
<div class="content"></div></div>
</div>
<div class="sect2">
<h3 id="_build">3.2. Build</h3>
<div class="paragraph"><p>Simply run <code>make</code>. The provided Makefile should automatically take care
of downloads, setting up a bare UT tree, and building your mod in it, all for
you!</p></div>
<div class="paragraph"><p>The folder containing the bare UT tree, as well as the output subdr with builds
of the mod, can be specified with the <code>BUILD_DIR</code> environment variable. It
defaults to <code>./build</code>.</p></div>
<div class="paragraph"><p>You can then use <code>DESTDIR=/path/to/my/UnrealTournament make install</code> to install
the mod.</p></div>
</div>
</div>
</div>
<div class="paragraph"><p>Using this template depends on whether you&#8217;re adapting for an existing mod or
making a new one.</p></div>
<div class="sect2">
<h3 id="_existing_mod">4.1. Existing Mod</h3>
<div class="paragraph"><p>The mod should have a single <code>Classes</code> folder, within which the UnrealScript (<code>.uc</code>)
files lie. This may require renaming an existing classes folder, such as <code>Sources</code>,
prior to starting.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
To begin, checkout this template anywhere. Try to be disambiguative and
    descriptive; for instance, <code>MyMod-modbuild</code>.
</p>
</li>
<li>
<p>
Copy the mod&#8217;s entire source tree (including <code>Sources</code>, and any .int files)
    into this template.
</p>
</li>
<li>
<p>
If applicable, copy the mod&#8217;s existing <code>.int</code> file into <code>template.int</code>,
    replacing any instances of package names in the latter with
    <code>{{{package}}}-{{{build}}}</code>, just as with the example <code>template.int</code>'s
    mutator list.
</p>
</li>
<li>
<p>
Edit <code>PACKAGE_NAME</code> at the top of the <code>Makefile</code> accordingly. You&#8217;ll only
    have to do this once.
</p>
</li>
<li>
<p>
Edit <code>template-options.yml</code> accordingly, if you use any custom options.
    This template&#8217;s example uses a <code>mutators</code> list, but you don&#8217;t have to.
    Most options will come from <code>buildconfig.sh</code>, see the next step;
</p>
</li>
<li>
<p>
Edit the block of variables in <code>buildconfig.sh</code> to reflect your mod. This
    should be intuitive and simple enough, but the <a href="#build-config">[build-config]</a> section
    gives some explanation for completeness&#8217;s sake.
</p>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="_new_mod">4.2. New Mod</h3>
<div class="paragraph"><p>If you&#8217;re creating a new mod, you can simply checkout this template, edit <code>buildconfig.sh</code> to
reflect your new mod, and <code>template.int</code> to change your mod&#8217;s .int file.</p></div>
<div class="paragraph"><p>Templates can take valus from both <code>buildconfig.sh</code> and <code>template-options.yml</code> files, though
the value <code>{{package}}</code> will automatically include the build number suffix
(e.g. <code>MyMod-20214201</code>).</p></div>
<div class="paragraph"><p>For more info on template values, see <a href="#template-values">[template-values]</a></p></div>
</div>
<div class="sect1">
<h2 id="_documentation">5. Documentation</h2>
<div class="sectionbody">
<div class="paragraph"><p>Miscellaneous tidbits of documentation for completeness&#8217;s sake.</p></div>
<div class="paragraph"><p>For your convenience, UT ModBuild includes a CI workflow file; more precisely,
a GitHub Actions CI workflow file, which GitHub should pick up on automatically
whenever you push a commit to your project on a GitHub repository.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If you just created your repository and you see no CI workflow runs, nor
an icon next to the commit name showing its CI status (yellow for pending, green
for a pass, red for a CI failure), check the <em>Actions</em> tab in the homepage of your
repository.</td>
</tr></table>
</div>
<div class="paragraph"><p>To make it clear, <em>every commit to the master branch will trigger a CI run.</em>
This is useful for checking whether it runs, and will generate a build accordingly.</p></div>
<div class="paragraph"><p>However, only releases that are <strong>tagged for release</strong> will actually be released by the
CI, and only if they build successfully, of course.</p></div>
<div class="paragraph"><p>To tag a commit for release, you must Git tag it with a name with the format
<code>releases/v$VERSION</code>, where <code>$VERSION</code> is a version string. For instance,
<code>releases/v1.0.0</code>. This should be picked up by the CI workflow when you push
it to GitHub.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Automatic releases will always be set as drafts. To actually publish them,
press <em>Edit</em>, then near the bottom <em>Publish release</em>.</td>
</tr></table>
</div>
<div class="paragraph"><p>Here are the options for <code>buildconfig.sh</code>:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
name
</dt>
<dd>
<p>
        Self-explanatory, the human-friendly name of your mod.
</p>
</dd>
<dt class="hdlist1">
package
</dt>
<dd>
<p>
        Self-explanatory, the name of your package internally.
</p>
</dd>
<dt class="hdlist1">
version
</dt>
<dd>
<p>
        Self-explanatory, the human-friendly version string of your mod.
       <br />
        I personally recommend sticking to
        <a href="https://semver.org/">Semantic Versioning</a>, as does MushMatch, to be able
        to actually properly express the size of an update by its version
        number.
       <br />
        See <a href="#versioning">[versioning]</a> for more info and guidelines on, well, versioning.
</p>
</dd>
<dt class="hdlist1">
build
</dt>
<dd>
<p>
        A build number, more internal than the version number.
       <br />
        A good build number format, which is used in Mush Match and also the
        default one here, is <strong>YYYYWWBB</strong>, where
       <br />
</p>
<div class="ulist"><ul>
<li>
<p>
<em>YYYY</em> is the year,
</p>
</li>
<li>
<p>
<em>WW</em> is the <a href="https://en.wikipedia.org/wiki/ISO_week_date">ISO</a> week
            number (e.g. Wed., October 20, 2021 will have a WW of <em>42</em>, but
            Sun., October 17, 2021 will have a WW of <em>41</em>, since ISO weeks
            start on Mondays);
</p>
</li>
<li>
<p>
<em>BB</em> is a suffix to discern from previous builds in the same week.
       <br />
        This format is very similar, for example, to what is used in
        Minecraft&#8217;s snapshot versioning format.
       <br />
        You don&#8217;t have to do it this way. Do it however you want if you&#8217;d rather!
        See <a href="#versioning">[versioning]</a> for more info and guidelines on it.
</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
debug
</dt>
<dd>
<p>
        Whether this is the full release, or a pre-release. See <a href="#versioning">[versioning]</a>
        on why you&#8217;d want this and how to do that.
       <br />
        Mush Match uses this in its Mustache-templated UnrealScript to
        <a href="https://github.com/Gustavo6046/MushMatch/blob/05e3d504273ce09167a44748d801d0702b7df1eb/Classes/MushMatch.uc#L982">display the build number</a>
        within the gametype&#8217;s very name only in debug builds:
       <br />
        [source,ini]
        ----
        ----
</p>
</dd>
</dl></div>
</div>
</div>
<div class="paragraph"><p>This is more of a general guideline or rule of thumb. UT ModBuild is useful
to help you version each package without having to edit source code files
manually. You only need to edit the version and build numbers in one place,
<code>buildconfig.sh</code>. See &lt;&lt;#build-config&gt;&gt; on more info how to do that.</p></div>
<div class="paragraph"><p>The general <strong>procedure</strong>, is that you edit the build number (<strong>and</strong>
<code>latest-changes.md</code>) with each individual change (even if said change spans
multiple commits), and the version number in a separate commit <em>after</em> each
full release.</p></div>
<div class="paragraph"><p>You also set <code>debug</code> to 1 after the release, then set it back to 0 on the
commit of the release. The reason is two-fold:</p></div>
<div class="ulist"><ul>
<li>
<p>
If a pre-release (debug=1) build is loaded into UT, this will set the
    <code>namesuffix</code> template value, which you can use, e.g., to allow players
    to see the build number next to the name, indicating that it is a
    pre-release and that it&#8217;s more of a testing version than anything.
   <br />
    See [[#template-values]] for more on those template values.
</p>
</li>
<li>
<p>
Even if you use a release tag here, the CI workflow will automatically
    set the new release to be a <em>pre-release</em>, and to be displayed as such,
    if <code>debug</code> is set.
   <br />
    See [[#auto-release]] for more on auto-releases.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Of course, the only real purpose of the build number is to discern from other
builds, to avoid the classic and frustrating Package Mismatch errors you can
get if multiple versions of a mod are floating around with the same filename.</p></div>
<div class="paragraph"><p>UT ModBuild uses the Mustache template engine to process not only <code>template.int</code>,
but also <em>every single UnrealScript file you use</em>. This can be very powerful,
as it allows you to change a lot of things about your mod, depending on the
versioning and the options you pick.</p></div>
<div class="paragraph"><p>Options for templating are taken from both <code>template-options.yml</code> and
<code>buildconfig.sh</code>. Only a handful of relevant variables are used from
<code>buildconfig.sh</code>, and a few additional special variables are constructed from
those.</p></div>
<div class="paragraph"><p>Here are the notable options:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>package</code> is <strong>automatically suffixed with the build number</strong>. So instead of
    <code>MyMod</code>, you can expect <code>MyMod-20214201</code>.
</p>
</li>
<li>
<p>
A special <code>namesuffix</code> variable is created. If <code>debug</code> is set to 0, it&#8217;s
    empty. Otherwise, it is set to a single space, followed by the build number
    in parentheses, like ` (20214201)`.
</p>
<div class="literalblock">
<div class="content">
<pre><code>This is useful to e.g. add in front of mutator names in the INT template,
and gametype names in UnrealScript. The former is exemplified in this
example `tempate.int`; the latter can be seen in any prerelease Mush Match
build.</code></pre>
</div></div>
</li>
</ul></div>
<div class="paragraph"><p>The list of values that can be used from buildconfig.sh are <code>name</code>, <code>version</code>,
<code>package</code> (but see above), <code>version</code> and <code>debug</code>. Most don&#8217;t go through any
processing and are simply copied verbatim.</p></div>
<div class="sect1">
<h2 id="_background">8. Background</h2>
<div class="sectionbody">
<div class="paragraph"><p>This build system was originally created to make
<a href="https://github.com/Gustavo6046/MushMatch">MushMatch</a> easier to build from
a checkout, as well as to enable checking, building and releasing via CI.</p></div>
<div class="paragraph"><p>I realized that it could be truly helpful for a lot of people, plus it
could be made a bit easier to port to other existing mods, so I decided
to split this into its own template.</p></div>
<div class="paragraph"><p>Hopefully this achieves in that goal.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_licensing">9. Licensing</h2>
<div class="sectionbody">
<div class="paragraph"><p>Files in the top level that pertian to the UT ModBuild build system are
licensed under the ISC. For those, see the [LICENSE.md] file.</p></div>
<div class="sect3">
<h4 id="_legal_copyright_disclaimer">9.0.1. Legal Copyright Disclaimer</h4>
<div class="paragraph"><p>The build system does, indeed, download a bare copy of Unreal Tournament (1999), which is
meant to have only the minimum assets required to run as a server. Due to its free availability
online compared to other instances where said files occur (such as retail), it is presumed that
no copyright infringement or other law infraction is inflicted by this.</p></div>
<div class="paragraph"><p>Additionally, this project does not host this downloaded file; it is provided by UT-Files.com.
Therefore, the authors, maintainers, and users of this project consider themselves waived of
any liability or responsibility with regards to that.</p></div>
<div class="paragraph"><p>In case any actual legal infraction is proved to be, consider forwarding legal proceedings and
inquiries to UT-Files.com, the hosts of the file in question. In any case, it would be polite
to notify the author of the project, at the e-mail address <a href="mailto:rehermnan6046@gmail.com">rehermann6046@gmail.com</a>,
so as to be made aware of this nuance and rectify the project to no longer be affected by it.</p></div>
<div class="paragraph"><p>In case legal contention is had specifically and explicitly with this projecti tself, please
send any legal inquiries or takedown requests toward the e-mail address
<a href="mailto:rehermnan6046@gmail.com">rehermann6046@gmail.com</a>. Response and/or action may be expected
in up to seven days, after the which a DMCA takedown notice is more than polite, although there
is little against otherwise other than objection.</p></div>
<div class="paragraph"><p>In case a DMCA takedown notice is received, it would be preferable for the repository to be
made private so that project files can be downloaded and backed up, at least temporarily.</p></div>
<div class="paragraph"><p>The main author of the project, Gustavo Ramos Rehermann as of writing (October 2021), is not
situated in the United States of America, nor under American jurisdiction. Please refer to the
Brazilian justice system for appropriate research and proceedings.</p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2021-10-20 20:23:03 -03
</div>
</div>
</body>
</html>
